<!DOCTYPE html>
<html><head><meta charset='utf-8'/><title>Enigma Puzzle</title>
<meta name="description" content="Slide rows and columns to sort the letters"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"/>
<style>*{margin:0;padding:0;border:0;overflow:hidden;width:100%;height:100%;background-color:black;}</style></head><body/><script>
"use strict";{const I=300,S=1/I;let T=function(t,s){this.t(t,s)};T.prototype.t=function(t,s){this.w=t,this.s=s,this.dx=.5*t,this.dy=.5*s,this.scale=this.dx<this.dy?this.dx:this.dy,this.i=1/this.scale},T.prototype.h=function(t,s){return{dx:t*this.i,dy:s*this.i}};let A=function(t=0,s=0,i=0,h=0,n=0){this.x=t,this.y=s,this.w=i,this.s=h,this.o=n};A.prototype.u=function(t){const s=this.o;if(1===s){const s=t.scale?t.scale:.5*(t.w<t.s?t.w:t.s);return new A(this.x*s+.5*t.w,this.y*s+.5*t.s,this.w*s,this.s*s)}if(8===s){const s=t.w,i=t.s;return new A(this.x*s,this.y*i,this.w*s,this.s*i)}if(9===s){const s=t.w,i=t.s;return new A((this.x+.5*this.w)*s,(this.y+.5*this.s)*i,this.w*s,this.s*i)}if(6===s){const s=t.w,i=t.s;let h,n,o;s<i?(n=1,o=i/(h=s)):(o=1,n=s/(h=i));let e=this.w;e<0&&(e+=n);let c=this.s;return c<0&&(c+=o),new A((this.x+(this.x<0?n-.5*e:.5*e))*h,(this.y+(this.y<0?o-.5*c:.5*c))*h,e*h,c*h)}if(7===s){let s=t.w,i=t.s,h=1,n=1;const o=s<i?s:i;let e=this.w;e<0&&(e+=h=s/o,s=o);let c=this.s;return c<0&&(c+=n=i/o,i=o),new A((this.x+(this.x<0?h-.5*e:.5*e))*s,(this.y+(this.y<0?n-.5*c:.5*c))*i,e*s,c*i)}return 0===s?this.clone():null},A.prototype.l=function(t){const s=this.o;if(8===s){const s=t.i,i=2*t.dx,h=2*t.dy;return new A((this.x*i-t.dx)*s,(this.y*h-t.dy)*s,this.w*i*s,this.s*h*s,1)}if(0===s){const s=t.M;return new A((this.x-t.dx)*s,(this.y-t.dy)*s,this.w*s,this.s*s,1)}return 1===s?this.clone():null},A.prototype.g=function(t){if(8===this.o)return;if(1!==this.o)return;const s=t.scale/(2*t.dx),i=t.scale/(2*t.dy);this.x*=s,this.x+=.5,this.y*=i,this.y+=.5,this.w*=s,this.s*=i,this.o=8},A.prototype.m=function(t){if(9===this.o)return;if(0!==this.o)return;const s=1/(2*t.dx),i=1/(2*t.dy);this.x=(this.x-.5*this.w)*s,this.y=(this.y-.5*this.s)*i,this.w*=s,this.s*=i,this.w<0&&(this.x-=this.w,this.w=-this.w),this.s<0&&(this.y-=this.s,this.s=-this.s),this.x<0&&(this.w+=this.x,this.x=0),this.y<0&&(this.s+=this.y,this.y=0),this.x>1&&(this.x=1),this.y>1&&(this.y=1),this.x+this.w>1&&(this.w=1-this.x),this.y+this.s>1&&(this.s=1-this.y),this.o=9},A.prototype.p=function(t){const s=this.u(t);return s.x+=t.x-.5*t.w,s.y+=t.y-.5*t.s,s},A.prototype.v=function(t){if(0!==this.o)return null;const s=(this.w<this.s?this.w:this.s)*(t-1);return new A(this.x,this.y,this.w+s,this.s+s)},A.prototype.clone=function(t){return Object.assign({},this)};const z=1/255;function t(t){let s="rgba(";return s+=t>>16&255,s+=",",s+=t>>8&255,s+=",",s+=255&t,s+=",",s+=((t>>24&255)*z).toFixed(3),s+=")"}function s(t,s){return(t>>1&2139127680)+(s>>1&2139127680)&4278255360|(16711935&t)+(16711935&s)>>1&16711935}function i(t,s){return(65280&t)+(65280&s)>>1&65280|(16711935&t)+(16711935&s)>>1&16711935|4278190080&t}function h(t,s){return 3*(t>>2&1069563840)+(s>>2&1069563840)&4278255360|3*(16711935&t)+(16711935&s)>>2&16711935}function n(t){return i(t,h(function(t){let s=t>>16&255,i=t>>8&255,h=255&t,n=Math.min(s,i,h),o=Math.max(s,i,h),e=o-n;if(0===e)return t;let c=o/e;return s=Math.floor((s-n)*c),i=Math.floor((i-n)*c),(h=Math.floor((h-n)*c))+(i<<8)+(s<<16)|4278190080&t}(t),0))}function o(t){let s=t>>16&255,h=t>>8&255,n=255&t,o=Math.max(s,h,n);if(0===o)return 8421504|t;if(255===o)return i(t,16777215);let e=255/o;return s=Math.floor(s*e),h=Math.floor(h*e),(n=Math.floor(n*e))+(h<<8)+(s<<16)|4278190080&t}function e(t){return 0!=(2147483648&t.flags)}let O=function(t=1,s=0,i=.04,h=.1,n=0){this.k=null,this.ratio=t,this.I=s,this.margin=i,this.padding=h,this.S=n,this.T=!1},$=function(){const t=document.createElement("canvas");document.body.appendChild(t),this.A=[],this.areas=[],this.O=!1,this.$=!1,this.C=!1,this.F=null,this.G=new T(1,1),this.canvas=t,this.P=this.canvas.getContext("2d"),this.R=!1,this.j={N:null,U:null,buttons:0,B:0,H:0,x:0,y:0,dx:0,dy:0},this.L=!G,this.q=!1,this.D=null,this.canvas.onclick=this.J.bind(this),this.canvas.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),!1}};function c(t,s,i,h){let n=function(t,s,i){if(t<=0||s<=0||i<=0)return new A(1,1,0);const h=s/t,n=t/s;let o=Math.ceil(Math.sqrt(i*h)),e=Math.floor(o*n);for(;o*e<i;)e<1?(e=1,o=Math.ceil(e*h)):(++o,e=Math.floor(o*n));let c=s/o,r=Math.ceil(Math.sqrt(i*n)),f=Math.floor(r*h);for(;r*f<i;)f<1?(f=1,r=Math.ceil(f*n)):(++r,f=Math.floor(r*h));let u=t/r;return u<c&&(r=e,f=o,u=c),(r-1)*f>=i&&--r,r*(f-1)>=i&&--f,new A(r,f,u)}(t/i,s,h);return n.s=n.w,n.w*=i,n}function r(t,s){const i=t.system.G,h=t.system.A;t.K=[];const n=t.K;for(const s of h)s.V===t&&n.push(s);const o=n.length;let r=o;if(r<=0)return;t.I>1&&r<t.I&&(r=t.I);const f=typeof n[0].W;if("number"===f?n.sort(function(t,s){return t.W-s.W}):"string"===f&&n.sort(function(t,s){return t.W===s.W?0:t.W<s.W?-1:1}),9!==t.k.o){const s=t.k.u(i);s.m(i),t.k=s}const u=t.k.u(i);let l=u.w,a=u.s;const w=t.k;let M,d;l<a?(M=1,d=l/a):(M=a/l,d=1);const g=48==(48&t.S),m=192==(192&t.S),b=g?0:t.margin*M;l*=1-b;const p=m?0:t.margin*d;let x,v,y,k;a*=1-p;const S=t.ratio>=1?t.padding:t.padding*t.ratio,T=c(l,a,(t.ratio+S)/(1+S),r);t.I<1?(t.I<0&&(T.x>T.y?T.x=Math.ceil(r/T.y):T.y=Math.ceil(r/T.x)),(y=(1-b)/T.x)*l<(k=(1-p)/T.y)*a?(x=t.padding,v=t.padding*(y*l)/(k*a)):(x=t.padding*(k*a)/(y*l),v=t.padding)):t.I>0&&(y=(1-b)*(T.w*T.x)/(T.x*l),k=(1-p)*(T.s*T.y)/(T.y*a),x=1-t.ratio/(t.ratio+S),v=1-1/(1+S));let z=x;const O=1&t.S,$=2&t.S,C=4&t.S,F=8&t.S,G=2*-O+1,P=1-$;let R=.5*b;if(C){R+=.5*(1-b-(1===T.y?r:T.x)*y)}let j=.5*p;if(F){j+=.5*(1-p-Math.ceil(r/T.x)*k)}R=O?1-R:R,j=$?1-j:j;const N=s?performance.now()+I:0;let U=0;for(let h=0;h<T.y;++h){let c=T.x;t.I<0&&(0===h&&T.y*T.x>r&&(c=r-(T.y-1)*T.x),y=(1-b)/c,x=z*c/T.x);for(let t=0;t<c&&!(U>=o);++t){const o=n[U];++U;const c=e(o);M=c?y:y*(1-x),d=c?k:k*(1-v);const r=(y*G*(t+.5)+R)*w.w+w.x,f=(k*P*(h+.5)+j)*w.s+w.y,u=M*w.w,l=d*w.s;s?(o.k.g(i),o.X=new A(r,f,u,l,8),o.X.endTime=N):(o.X=null,o.k.x=r,o.k.y=f,o.k.w=u,o.k.s=l,o.k.o=8,o.resize())}}if(256&t.S&&(1===T.x||1===T.y))for(const i of n){const h=s?i.X:i.k;i.W=t.k.w>t.k.s?(h.x-.5)*G:(h.y-.5)*P}}$.prototype.Y=function(){this.Z&&clearTimeout(this.Z),this.Z=setTimeout(this.resize.bind(this),100)},$.prototype.resize=function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this._=new A(.5*this.canvas.width,.5*this.canvas.height,this.canvas.width,this.canvas.height),this.G.t(this.canvas.width,this.canvas.height),this.onresize&&this.onresize();for(const t of this.areas)r(t,!1);this.R=!0},$.prototype.tt=function(){return this._};let C=null;function f(){C&&(C.R&&C.st(),window.requestAnimationFrame(f))}function u(){return 0===this.k.o?this.k.clone():this.parent?function t(s){return s.parent&&s.parent.k?s.k.p(t(s.parent)):s.k.u(s.system.G)}(this):this.k.u(this.system.G)}function l(t,s,i){let h=s.w,n=s.s,o=s.x-.5*h,e=s.y-.5*n,c=(h<n?h:n)*i;t.beginPath(),t.moveTo(o+c,e),t.arcTo(o+h,e,o+h,e+n,c),t.arcTo(o+h,e+n,o,e+n,c),t.arcTo(o,e+n,o,e,c),t.arcTo(o,e,o+h,e,c),t.closePath()}function a(s,i,h,e=!1,c=.125){const r=o(h),f=t(n(h)),u=t(h),a=t(r);let w;if(s.lineWidth=.1*(i.w<i.s?i.w:i.s),e)w=u;else{const t=i.x,h=i.y-.5*i.s;(w=s.createLinearGradient(t,h,t,h+i.s)).addColorStop(0,a),w.addColorStop(.16,f),w.addColorStop(.67,f),w.addColorStop(1,a)}s.fillStyle=w,l(s,i,c),s.fill(),s.save(),s.clip(),(w=s.createLinearGradient(i.x-.5*i.w,i.y-.5*i.s,i.x+.5*i.w,i.y+.5*i.s)).addColorStop(0,u),w.addColorStop(.18,a),w.addColorStop(.2,"#fff"),w.addColorStop(.22,a),w.addColorStop(.6,u),w.addColorStop(.7,f),w.addColorStop(.8,u),w.addColorStop(.88,a),w.addColorStop(.9,"#fff"),w.addColorStop(.92,a),w.addColorStop(1,u),s.strokeStyle=w,l(s,i,c),s.stroke(),s.restore()}function w(t,s,i,h){t.translate(s,i),t.beginPath(),t.arc(0,0,h,0,2*Math.PI),t.fill(),t.translate(-s,-i)}$.prototype.J=function(t){if(!this.O){if(this.$)return this.$=!1,!1;this.it()}return this.onclick&&this.onclick(this.j),!1},$.prototype.ht=function(t){const s=this.j,i=s.U;s.U=t;const h=t&&t.onclick?"pointer":"auto";this.canvas.style.cursor!==h&&(this.canvas.style.cursor=h),(t&&t.nt||i&&i.nt)&&(this.R=!0)},$.prototype.ot=function(t){const s=this.canvas.getBoundingClientRect(),i=t.clientX-s.left,h=t.clientY-s.top,n=this.j;if(n.buttons=t.buttons,n.dx=i-n.x,n.dy=h-n.y,n.x=i,n.y=h,this.L&&!n.buttons){const t=this.select(n.x,n.y);n.U!==t&&this.ht(t)}if(n.N){const t=n.N;this.q&&t.et&&t.move(n.dx,n.dy),t.onmousemove&&t.onmousemove(n)}return this.onmousemove&&this.onmousemove(n),!1},$.prototype.ct=function(t){if(t.changedTouches.length<1)return!1;const s=t.changedTouches[0];return s.identifier===this.D&&(s.buttons=1,this.ot(s),!1)},$.prototype.rt=function(t){return this.onmouseenter&&this.onmouseenter(),!1},$.prototype.ft=function(t){const s=this.j;return(s.N||this.L&&s.U&&s.U.nt)&&(this.R=!0),s.N&&s.N.onmouseout&&s.N.onmouseout(s),this.onmouseout&&this.onmouseout(s),s.U=null,s.N=null,!1},$.prototype.ut=function(t){if(t.changedTouches.length<1)return!1;const s=t.changedTouches[0];return s.identifier===this.D&&(this.D=null,this.lt(s),!1)},$.prototype.lt=function(t){const s=this.canvas.getBoundingClientRect(),i=t.clientX-s.left,h=t.clientY-s.top,n=this.j;n.x=i,n.y=h,(this.L&&n.U||n.N)&&(this.R=!0);const o=this.select(n.x,n.y);return this.L&&n.U!==o&&this.ht(o),this.onmouseup&&this.onmouseup(n),o&&n.N===o&&o.onclick&&o.onclick(n),n.N&&n.N.onmouseup&&n.N.onmouseup(n),this.j.buttons=0,this.j.N=null,!1},$.prototype.at=function(t){if(this.canvas.onmousedown&&(this.canvas.onmousemove=null,this.canvas.onmouseout=null,this.canvas.onmouseenter=null,this.canvas.onmouseup=null,this.canvas.onmousedown=null),t.changedTouches.length<1)return!1;const s=t.changedTouches[0];return null===this.D&&(this.D=s.identifier,s.buttons=1,this.wt(s)),!1},$.prototype.wt=function(t){const s=this.canvas.getBoundingClientRect(),i=t.clientX-s.left,h=t.clientY-s.top,n=this.j;n.B=i,n.H=h,n.dx=0,n.dy=0,n.x=i,n.y=h,n.buttons=t.buttons;const o=this.select(n.x,n.y);return this.L&&(n.U=o),n.N=o,this.onmousedown&&this.onmousedown(),o&&o.onmousedown&&o.onmousedown(n),o&&(this.R=!0),!1},$.prototype.Mt=function(t){if(t.changedTouches.length<1)return!1;return t.changedTouches[0].identifier===this.D&&(this.D=null,this.ft(),!1)},$.prototype.dt=function(){!0!==this.C&&(this.C=!0,window.addEventListener("resize",this.Y.bind(this)),this.resize(),C||(C=this,f()))},$.prototype.it=function(){!0!==this.O&&((this.onmousemove||this.L||this.q)&&(this.canvas.onmousemove=this.ot.bind(this),this.canvas.ontouchmove=this.ct.bind(this)),this.canvas.onmouseout=this.ft.bind(this),this.canvas.onmouseenter=this.rt.bind(this),this.canvas.ontouchcancel=this.Mt.bind(this),this.canvas.ontouchstart=this.at.bind(this),this.canvas.onmousedown=this.wt.bind(this),this.canvas.ontouchend=this.ut.bind(this),this.canvas.onmouseup=this.lt.bind(this),this.O=!0,this.F&&(this.R=!0))},$.prototype.gt=function(){!1!==this.O&&(this.$=!0,this.canvas.onmousemove=null,this.canvas.onmouseout=null,this.canvas.onmouseenter=null,this.canvas.onmouseup=null,this.canvas.onmousedown=null,this.canvas.ontouchstart=null,this.canvas.ontouchend=null,this.canvas.ontouchmove=null,this.canvas.ontouchcancel=null,this.O=!1,this.F&&(this.R=!0))},$.prototype.st=function(){if(this.canvas.width<1||this.canvas.height<1)return;this.R=!1;for(const t of this.areas)t.T&&(t.T=!1,r(t,!0));const t=performance.now();for(const s of this.A){if(!s.X||8!==s.k.o)continue;const i=s.X,h=s.k,n=i.endTime-t;if(h.o!==i.o||n<=0)s.k=i,s.X=null;else{const t=n*S,s=1-t;h.x=h.x*t+i.x*s,h.y=h.y*t+i.y*s,h.w=h.w*t+i.w*s,h.s=h.s*t+i.s*s,this.R=!0}s.resize()}this.bt?this.bt():this.P.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.A)t.pt();var s,i;this.F&&!this.O&&(this.P.fillStyle=this.F,s=this.P,i=this._,s.fillRect(i.x-.5*i.w,i.y-.5*i.s,i.w,i.s))},$.prototype.xt=function(t){let s=this.areas.indexOf(t);return-1===s&&(3840&t.S&&(this.q=!0),s=this.areas.length,t.system=this,t.tt=u.bind(t),this.areas.push(t)),s},$.prototype.vt=function(){this.areas=[]},$.prototype.add=function(t){-1===this.A.indexOf(t)&&(t.system=this,t.onclick&&(t.nt=!0),t.tt=u.bind(t),t.add=function(){const t=this.system.A;-1===t.indexOf(this)&&t.push(this)}.bind(t),t.remove=function(){const t=this.system.A,s=t.indexOf(this);-1!==s&&t.splice(s,1)}.bind(t),t.move=function(t,s){const i=this.k;if(1===i.o){const h=this.system.G.h(t,s);return i.x+=h.dx,i.y+=h.dy,this.system.R=!0,!0}return!1}.bind(t),t.yt=function(t,s){for(const i of this.system.areas){if(0==(3840&i.S))continue;const h=i.tt();if(!(Math.abs(t-h.x)>.5*h.w||Math.abs(s-h.y)>.5*h.s)){if(256&i.S){const n=2*-(1&i.S)+1,o=1-(2&i.S),e=this.W;if(this.W=h.w>h.s?(t-h.x)/h.w*n:(s-h.y)/h.s*o,i.kt&&!i.kt(this)){this.W=e;break}this.It=e}return this.et=null,this.V=i,i.T=!0,!0}}return!1}.bind(t),t.St=function(t){this.et=null,this.V=t,t.T=!0}.bind(t),t.Tt=function(){if(!this.V)return!1;if(this.et=this.V,this.V=null,this.k=this.k.l(this.system.G),function(t){const s=t.system.A,i=s.indexOf(t);i<0||(s.splice(i,1),s.push(t))}(this),256&this.et.S){const t=this.W;this.W=this.It,this.It=t}return this.et.T=!0,!0}.bind(t),t.At=function(){if(!this.et||this.V===this.et)return!1;if(256&this.et.S){const t=this.W;this.W=this.It,this.It=t}return this.V=this.et,this.V.T=!0,!0}.bind(t),this.A.push(t))},$.prototype.select=function(t,s){for(let i=this.A.length-1;i>=0;--i){const h=this.A[i];if(h.zt)continue;const n=h.tt();if(Math.abs(t-n.x)<.5*n.w&&Math.abs(s-n.y)<.5*n.s)return h}return null},$.prototype.Ot=function(t,s=null){return null===t||0===t.length?s:(null!==s&&s.src===t||((s=new Image).src=t,s.complete||s.addEventListener("load",()=>{this.R=!0})),s)};let F=function(t,s,i,h=4,n=1){this.$t=i,this.Ct=h,this.Ft=n,this.Gt=null,this.k=t,this.text=s};F.prototype.resize=function(){this.Gt=null},F.prototype.pt=function(t,s,i=null){if(this.text.length<=0)return;let h=this.k.p(s),n=this.Gt===this.text;for(n||(this.Pt=this.Ft>1?this.Ft:h.s*this.Ft,this.Pt>h.s&&(this.Pt=h.s),this.Gt=this.text);;){if(this.Pt<1)return;if(t.font=this.Pt.toFixed(2)+"px "+this.$t,n)break;let s=t.measureText(this.text).width;if(h.w>=s)break;this.Pt*=h.w/s,n=!0}!function(t,s,i,h,n,o,e=0,c=1){let r,f,u=s.length,l=h*c;t.textBaseline="alphabetic",e=16&n?e*i.w:0,n&=15,r=i.x;let a=n%3;switch(a){case 1:t.textAlign="center";break;case 0:t.textAlign="left",r+=.5*(e-i.w);break;case 2:t.textAlign="right",r+=.5*(i.w-e)}switch(f=i.y+.35*h,n-a){case 0:f+=.5*(h-i.s);break;case 3:f+=l*(1-u)*.5;break;case 6:f+=.5*(i.s-h)+l*(1-u)}if(o&&h>=4)if(h<60){let i=t.fillStyle;t.fillStyle=o;let n=h<30?1:1.45;for(let i=0;i<u;++i){let h=f+l*i;t.fillText(s[i],r+n,h),t.fillText(s[i],r-n,h),t.fillText(s[i],r,h+n),t.fillText(s[i],r,h-n)}t.fillStyle=i}else{t.lineWidth=h>=100?4:.04*h,t.strokeStyle=o;for(let i=0;i<u;++i)t.strokeText(s[i],r,f+l*i)}for(let i=0;i<u;++i)t.fillText(s[i],r,f+l*i)}(t,[this.text],h,this.Pt,this.Ct,i)};const G=(()=>{const t=navigator.userAgent;return t.match(/Android/i)||t.match(/webOS/i)||t.match(/iPhone/i)||t.match(/iPad/i)||t.match(/iPod/i)})();function M(t){const s=new Audio(t+".ogg");return s.preload="auto",s.Rt=function(){this.readyState<2||(0!==this.currentTime&&(this.currentTime=0),this.play())},s.jt=function(){this.readyState<1||(this.pause(),this.currentTime=0)},s}function d(t,s=1){if(this.Nt=[],this.index=0,this.Ut=Array.isArray(t),this.Ut){this.Bt=t.length;for(const s of t)this.Nt.push(M(s))}else{this.Bt=s;for(let i=0;i<s;++i)this.Nt.push(M(t))}this.play=function(){if(this.Ut){if(this.Bt>1){const t=Math.floor(Math.random()*(this.Bt-1));this.index=t<this.index?t:t+1}else this.index=0;this.Nt[this.index].Rt()}else this.Nt[this.index].Rt(),++this.index,this.index>=this.Bt&&(this.index=0)},this.stop=function(){for(const t of this.Nt)t.jt()}}let P,R,j,N;const U="Roboto, Tahoma",B=2954895392,H=o(B),L=s(H,B),q=s(B,L),D=t(1073741824|L),E=t(1056964608|H);class J{constructor(t,s){this.k=new A,this.V=s,this.Ht=new F(new A(.04,.2,.92,.6,7),t,U)}pt(){let t=this.tt();const s=this.system.P,i=this.system.j.U===this,h=this.system.j.N===this;h&&(t=t.v(.9)),a(s,t,i||h?L:B,!1,.3),s.fillStyle=i||h?"#fff":E,this.Ht.pt(s,t)}resize(){this.Ht.resize()}}let K,Q,V;class W{constructor(t,s){this.zt=!0,this.k=new A,this.V=s,this.Lt=new F(new A(.15,.15,.7,.25,7),t,U),this.label=new F(new A(.15,.5,.7,.35,7),"",U)}pt(){let i=this.tt();const h=this.system.P,e=this.qt;!function(i,h,e){const c=h.v(.97),r=h.w<h.s?h.w-c.w:h.s-c.s,f=n(e),u=(s(f,e),t(e)),l=t(o(e)),a=t(f),M=h.x,d=h.y,g=1.2*h.w,m=.8*h.s,b=M-.5*g,p=d-.5*m,x=i.createLinearGradient(b,p,b+g,p+m);let v;x.addColorStop(0,a),x.addColorStop(.1,u),x.addColorStop(.13,l),x.addColorStop(.15,"#fff"),x.addColorStop(.17,l),x.addColorStop(.2,u),x.addColorStop(.5,a),x.addColorStop(.6,u),x.addColorStop(.63,l),x.addColorStop(.65,"#fff"),x.addColorStop(.67,l),x.addColorStop(.7,u),x.addColorStop(1,a),i.lineWidth=r,i.strokeStyle=x,i.beginPath(),i.rect(h.x-.5*h.w+.5*r,h.y-.5*h.s+.5*r,h.w-r,h.s-r),i.stroke(),i.fillStyle=u,i.beginPath(),i.rect(c.x-.5*c.w,c.y-.5*c.s,c.w,c.s),i.fill(),(v=i.createLinearGradient(-r,-r,+r,+r)).addColorStop(.2,l),v.addColorStop(.35,u),v.addColorStop(.8,a),i.fillStyle=v;const y=h.v(.86);w(i,y.x-.5*y.w,y.y-.5*y.s,r),w(i,y.x+.5*y.w,y.y-.5*y.s,r),w(i,y.x-.5*y.w,y.y+.5*y.s,r),w(i,y.x+.5*y.w,y.y+.5*y.s,r)}(h,i,e?q:B),h.fillStyle=e?E:D,this.Lt.pt(h,i),h.fillStyle=e?"#fff":E,this.label.pt(h,i)}resize(){this.Lt.resize(),this.label.resize()}}const X=125,Y=1/X,Z=5,_="<svg xmlns='http://www.w3.org/2000/svg' height='72' width='72' viewBox='0 0 72 72'><defs><lg id='a' gu x1='61.46' y1='61.46' x2='0' y2='36'><sc'c0'so'.6'of'0'/><sc'c0'so'0'of'.07'/><sc'c1'so'0.2'of'.87'/><sc'#fff'of'.97'/><sc'c1'so'0.4'of'1'/></lg><lg id='b' gu x1='10.54' y1='61.46' x2='72' y2='36'><sc'c1'so'.64'of'0'/><sc'c1'so'0'of'.14'/><sc'c0'so'0'of'.96'/><sc'c0'of'1'/></lg><lg id='c' gu x1='61.46' y1='61.46' x2='0' y2='36'><sc'c0'so'0.2'of'0'/><sc'c1'so'.27'of'.1'/><sc'c0'so'.22'of'.45'/><sc'c1'of'.65'/><sc'#fff'of'.68'/><sc'c0'so'.17'of'.75'/><sc'c0'so'.2'of'1'/></lg><lg id='d' gu x1='0' y1='66' x2='0' y2='0'><sc'c1'of'0'/><sc'c1'so'.16'of'.25'/><sc'c0'so'0'of'.33'/><sc'c0'so'.16'of'.58'/><sc'c0'so'.5'of'.89'/><sc'c0'of'1'/></lg><path id='p' d='m36 4 22.63 9.37 9.37 22.63-9.37 22.63-22.63 9.37-22.63-9.37-9.37-22.63 9.37-22.63 22.63-9.37z'/></defs><g stroke-width='3.8'><use href='#p' fill='none' stroke='url(#b)'/><use href='#p' fill='none' stroke='url(#a)'/><use href='#p' fill='url(#d)' stroke='url(#c)'/></g><text x='36' y='36' fill='#fff' dominant-baseline='central' text-anchor='middle' font-size='40px'>$</text></svg>".replace(/sc/g,"stop stop-color=").replace(/lg/g,"linearGradient").replace(/so/g," stop-opacity=").replace(/of/g," offset=").replace(/gu/g,"gradientUnits='userSpaceOnUse'"),tt="data:image/svg+xml;base64,",st=["ASCII","Numbers","Hellenic","Latin"],it=[];let ht,nt,ot,et,ct=0;class rt{constructor(t){this.k=t,this.Dt=!1,this.Et=[...Array(Z*Z).keys()],this.Jt=new Array(Z),this.Kt=null,this.Qt=6}Vt(){it[ct]?(this.Wt=it[ct],this.Xt=null):(it[ct]=function(t){const s=[[117,39,1287,1794,1872],[87,114,1392,1824,1797],[1872,374,39,1287,1794],[519,87,1649,1824,1797]][t],i=Z*Z;let h=[],n=0,o=0;for(let e=0;e<i;++e){let i=[];for(let t=0;t<2;++t){const h=(n+1)*(t+2)-1,e=15-h,c=n<2?0:(2*n-3)*(t+2)-1,r=n>2?0:16-(2*n+1)*(t+2);i[t]="#";for(let n=0;n<3;++n){const f=s[o]>>(n<<2)&7,u=2===f?e:5===f?h:6===f?c:1===f?r:7===f?15:0;i[t]+=u.toString(16)}}const c=_.replace(/c0/g,i[0]).replace(/c1/g,i[1]);switch(t){case 1:h.push(ht.Ot(tt+btoa(c.replace("$",1+e+""))));break;case 2:const s=913+(16===e?71:17===e?16:e);h.push(ht.Ot(tt+btoa(c.replace("$","&#x"+s.toString(16)+";"))));break;case 3:const i=65+(e<9?e:e<13?e+1:13===e?144:e<20?e:e+1);h.push(ht.Ot(tt+btoa(c.replace("$","&#x"+i.toString(16)+";"))));break;default:h.push(ht.Ot(tt+btoa(c.replace("$",String.fromCharCode(65+e)))))}++n===Z&&(n=0,++o)}return h}(ct),this.Xt=it[ct]),++ct>=st.length&&(ct=0),this.Yt.Ht.text=st[ct]}Zt(){this.Dt=!1,this.state=this.Et.slice(0),this._t=[];for(let t=0;t<this.Qt;++t){const s=Math.floor(Math.random()*Z),i=1+Math.floor(Math.random()*(Z-2));1&t?this.ts(s,i):this.moveRow(s,i),this._t.push((1&t)<<16|s<<8|i)}this.ss=this.state,this.reset()}hs(){if(!this.ns||!this.os)return;--this.ns;const t=this._t[this.ns],s=t>>16!=0,i=t>>8&255,h=Z-(255&t),n=this.es,o=this.tt();n.x=s?i:0,n.y=s?0:i;const e=h<.5*Z?h:h-Z;n.cs=s?0:-e*o.w/Z,n.rs=s?-e*o.s/Z:0;const c=Math.abs(e)*this.fs*X;this.us=performance.now()+c,this.ls=1/c,n.as=s,n.ws=!0,s?this.ts(i,h):this.moveRow(i,h),this.Ms(),this.system.R=!0,this.ns&&this.os&&(this.ds=setTimeout(this.hs.bind(this),c+X))}gs(t){this.os||(this.os=!0,this.ms(),this.fs=t,this.hs())}ms(){clearInterval(this.bs),this.bs=null,this.initialTime=null,K.label.text="0"}reset(){this.ms(),this.ps=0,clearTimeout(this.ds),this.ds=null,this.os=!1,this.ns=this._t.length,this.Dt=!1,this.state=this.ss.slice(0),Q.label.text="0/"+this._t.length,this.us=null,this.es={ws:!1,as:!1,x:0,y:0,cs:0,rs:0},this.xs()}moveRow(t,s){const i=t*Z,h=(t+1)*Z;(s*=-1)<0&&(s+=Z);let n=0;for(let t=i;t<h;t+=1)this.Jt[n++]=this.state[t];n=0;for(let t=i;t<h;t+=1)this.state[t]=this.Jt[(n+++s)%Z]}ts(t,s){const i=t,h=t+Z*Z,n=Z;(s*=-1)<0&&(s+=Z);let o=0;for(let t=i;t<h;t+=n)this.Jt[o++]=this.state[t];o=0;for(let t=i;t<h;t+=n)this.state[t]=this.Jt[(o+++s)%Z]}pt(){let t=this.tt();const s=this.system.P,i=t.x-.5*t.w,h=t.y-.5*t.s,n=.2*t.w,o=.2*t.s,e=this.es;let c=e.cs,r=e.rs;if(null!==this.us){const t=this.us-performance.now();if(t<0)this.us=null,e.ws=!1,e.vs&&(e.vs=!1,(this.Dt?P:j).play());else{this.system.R=!0;const s=t*this.ls;c*=s,r*=s}}const f=this.Dt?1:0,u=this.Dt?70:72;if(this.Dt&&!e.vs){const t=this.system.j.N===this?L:B;for(let e=1;e<Z;++e)for(let c=1;c<Z;++c)a(s,new A(i+c*n,h+e*o,.4*n,.4*o),t,!0,.5)}if(this.Xt){let t=!0;for(const s of this.Xt)if(!s.complete){t=!1;break}if(t&&(this.Wt=this.Xt),!this.Wt)return}if(e.ws){let t=0;for(let c=0;c<Z;++c)if(e.as||c!==e.y)for(let r=0;r<Z;++r)e.as&&r===e.x?++t:s.drawImage(this.Wt[this.state[t++]],0,0,72,72,i+r*n,h+c*o,n,o);else t+=Z;if(e.as){const c=e.x,f=i+c*n,u=o*Z;s.save(),s.beginPath(),s.rect(f,h,n,u),s.clip();for(let i=0;i<2;++i){const l=0===i?0:r<0?u:-u;t=c;for(let i=0;i<Z;++i){for(let c=0;c<=(i===e.y);++c)s.drawImage(this.Wt[this.state[t]],0,0,72,72,f,h+i*o+r+l,n,o);t+=Z}}s.restore()}else{const r=e.y,f=h+r*o,u=n*Z;s.save(),s.beginPath(),s.rect(i,f,u,o),s.clip();for(let h=0;h<2;++h){const l=0===h?0:c<0?u:-u;t=r*Z;for(let h=0;h<Z;++h){for(let r=0;r<=(h===e.x);++r)s.drawImage(this.Wt[this.state[t]],0,0,72,72,i+h*n+c+l,f,n,o);++t}}s.restore()}}else{let t=0;for(let e=0;e<Z;++e)for(let c=0;c<Z;++c)s.drawImage(this.Wt[this.state[t++]],f,f,u,u,i+c*n,h+e*o,n,o)}}xs(){const t=this.Et.length;let s=0;for(let i=0;i<t;++i)s+=this.Et[i]===this.state[i];return V.label.text=s+"/"+t,s}Ms(){this.xs()===this.Et.length&&(clearInterval(this.bs),this.bs=null,this.Dt=!0),++this.ps,this.es.vs=!0,Q.label.text=this.ps+"/"+this._t.length}onmousedown(t){if(this.os)return;if(this.Dt)return;null===this.initialTime&&(this.initialTime=performance.now(),this.bs=setInterval(function(){K.label.text=((performance.now()-nt.initialTime)/1e3).toFixed(0),ht.R=!0},1e3));const s=this.es;this.us=null,s.ws=!0,s.vs=!1;const i=this.tt(),h=i.x-.5*i.w,n=i.y-.5*i.s;s.x=Math.floor((t.B-h)*Z/i.w),s.y=Math.floor((t.H-n)*Z/i.s),s.w=i.w,s.s=i.s,s.cs=0,s.rs=0}onmousemove(t){if(this.os)return;const s=this.es;if(s.ws){s.cs=t.x-t.B,s.rs=t.y-t.H;const i=Math.abs(s.cs),h=Math.abs(s.rs);s.as=i<h,this.system.R=!0,(i>s.w||h>s.s)&&(this.onmouseup(t),s.ws=!1)}}onmouseup(t){if(this.os)return;const s=this.es;if(!s.ws)return;this.us=performance.now()+X,this.ls=Y;const i=this.tt(),h=(t.x-t.B)*Z/i.w,n=(t.y-t.H)*Z/i.s,o=Math.round(h),e=Math.round(n);s.cs*=1-o/h,s.rs*=1-e/n;const c=Math.abs(h),r=Math.abs(n);s.as=c<r,0!==o||0!==e?(s.as?Math.abs(e)<5&&this.ts(s.x,e):Math.abs(o)<5&&this.moveRow(s.y,o),this.Ms()):c+r<.01&&(this.us=null,s.ws=!1)}onmouseout(t){this.onmouseup(t)}}function g(){R.play(),nt.Zt()}function m(){clearInterval(nt.Kt),nt.Kt=setInterval(function(){Q.qt=!0,nt.Qt+=2,nt.Qt>10&&(nt.Qt=4),Q.label.text="?/"+nt.Qt,ht.R=!0},1e3)}function b(){Q.qt=!1,clearInterval(nt.Kt),nt.Kt=null,Q.label.text=nt.ps+"/"+nt._t.length}function p(){0!==nt.ps?(N.play(),nt.reset()):nt.ms()}function x(){const t=nt.os?6:2;0!==nt.ps&&p(),nt.gs(t)}function v(){nt.os||0!==nt.ps||(Q.qt=!0,Q.label.text="↕ ↔ …")}function y(){Q.qt=!1,nt.os||(Q.label.text=nt.ps+"/"+nt._t.length)}function k(){j.play(),nt.Vt()}window.addEventListener("load",function(){ht=new $,setTimeout(()=>{P=new d("b"),R=new d("s"),N=new d("r",2),j=new d([0,1,2,3])},0),ot=new O(3,1,.1,.2),ht.xt(ot),et=new O(1.5,-1,.01,.04),ht.xt(et),nt=new rt,ht.add(nt),Q=new W("Moves",et),K=new W("Time",et),V=new W("Fit",et),ht.add(V),ht.add(Q),ht.add(K);const t=new J("New",ot);t.onclick=g,t.onmousedown=m,t.onmouseup=b,t.onmouseout=b,ht.add(t);const s=new J("Restart",ot);s.onclick=p,ht.add(s);const i=new J("Solve",ot);i.onclick=x,i.onmousedown=v,i.onmouseup=y,i.onmouseout=y,ht.add(i),nt.Yt=new J("",ot),nt.Yt.onclick=k,ht.add(nt.Yt),nt.Vt(),nt.Zt();const h=new J("Full Screen",ot);h.onclick=function(){ht.canvas.requestFullscreen()},ht.ys=h,document.onfullscreenchange=function(t){null===document.fullscreenElement?ht.ys.add():ht.ys.remove()},ht.add(h),ht.onresize=function(){const t=this.canvas.width/this.canvas.height;t>1.5?(nt.k=new A(0,0,2,2,1),et.k=new A(5.15,0,8,2,1),ot.k=new A(-5.15,0,8,2,1),ot.S=48):t<=.75?(nt.k=new A(0,0,2,2,1),et.k=new A(0,5.1,2,8,1),ot.k=new A(0,-5.1,2,8,1),ot.S=52):(nt.k=new A(.2,0,.8,.8,9),et.k=new A(.2,.82,.8,.18,9),ot.k=new A(0,0,.18,1,9),ot.S=48)},ht.onmousemove=function(){},ht.bt=function(){const t=this.P;t.fillStyle="#000",t.fillRect(0,0,this.canvas.width,this.canvas.height)},ht.dt(),ht.it()})}
</script></html>
